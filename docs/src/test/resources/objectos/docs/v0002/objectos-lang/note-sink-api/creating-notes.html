<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="/favicon.ico"><style>*{box-sizing:border-box;margin:0;padding:0}a{color:inherit;text-decoration:inherit}body{margin:0 auto;min-height:100%}code,pre{font-family:ui-monospace,"Liberation Mono","Cascadia Mono","Segoe UI Mono",Menlo,Monaco,Consolas,monospace}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}html{color:black;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Liberation Sans",sans-serif;font-size:16px;line-height:1.5;min-height:100%}table{width:100%}ul,ol{list-style-type:none}article{color:#212529}article blockquote{font-style:italic;padding-left:2.5rem}article h1{font-size:1.875rem;font-weight:600;letter-spacing:-0.5px;line-height:1.3;margin-bottom:1rem}article h1+p{margin-top:1.75rem}article h2{font-size:1.5rem;font-weight:600;margin-bottom:1rem;margin-top:3.5rem}article h3{border-bottom:1px solid #dee2e6;font-size:1.25rem;font-weight:500;letter-spacing:-0.25px;margin-bottom:1rem;margin-top:2rem}article p{margin:1rem 0}article a{color:#1971c2}article a:hover{text-decoration:underline}article p code,article ol code,article ul code{font-size:.875rem;font-weight:500;line-height:.875rem}article pre>code{font-size:.875rem;font-weight:500}article ol{list-style:decimal;padding-left:2.5rem}article ul{list-style:disc;padding-left:2.5rem}article li{margin:.75rem 0}#aho{padding:2rem 0}#aho>ol{align-items:center;display:flex;font-size:.875rem}#aho>ol li{align-items:center;display:flex}#aho>ol a{display:block}#aho>ol svg{display:block}body{max-width:768px;padding:1rem}@media screen and (min-width:768px){body{padding:1.5rem}}#mgc{border-top:1px solid #dee2e6;display:flex;margin-top:5rem;padding:.5rem 0 1rem}#mgc a{align-items:center;color:#1971c2;display:flex}#mgc a:hover span{text-decoration:underline}#mgc>div{flex-grow:1}#mgc svg{display:block}#qpz{text-align:right}#qpz svg{margin-left:.5rem}#gcl{text-align:left}#gcl svg{margin-right:.5rem}.bhi{flex-grow:1;font-weight:500}.bhi>div{font-size:.875rem}.bhi>span{display:none}@media screen and (min-width:768px){#mgc{padding:2.5rem 0 5rem}#mgc svg{margin-top:1.25rem}.bhi>span{display:inline}}.jyf{background-color:#f8f9fa;border:1px solid #e9ecef;border-radius:.5rem;overflow-x:auto;padding:1.5rem}.juq{color:#c2255c}.wjs{color:#9c36b5}.qbr{color:#f03e3e}.iec{color:#4263eb}.uc6{color:#2b8a3e}.jrq,.cyc{color:#4263eb}</style></head><body><nav id="aho"><ol><li><a href="/0.2/index.html">Home</a></li><li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" height="16" width="16"><path fill="none" d="M0 0h24v24H0z"></path><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a href="/0.2/objectos-lang/index.html">Objectos Lang</a></li><li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" height="16" width="16"><path fill="none" d="M0 0h24v24H0z"></path><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a href="/0.2/objectos-lang/note-sink-api/index.html">The note sink API</a></li><li><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" height="16" width="16"><path fill="none" d="M0 0h24v24H0z"></path><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></svg><a href="/0.2/objectos-lang/note-sink-api/creating-notes.html">Creating notes</a></li></ol></nav><main><article><h1>Creating notes</h1>
<p><code>Note</code> objects represent an instant of a program execution for which you may
wish to keep a note of.</p>
<p>Defining and creating these objects is a central part of using the note sink API.</p>
<p>In this section we will discuss what are the properties of notes
and on how you create them in your Java program.</p>
<h2>Note properties</h2>
<p>Every note instance has the following properties:</p>
<ul>
<li><strong>source</strong>: a name, possibly hierarchical, indicating the source of the note.
This is typically the qualified name of the class where the note has been defined;</li>
<li><strong>key</strong>: an object that describes or identifies a note within the same source.
This is typically a string; and</li>
<li><strong>level</strong>: indicates the severity of the note.</li>
</ul>
<p>Notes may <em>optionally</em> have the following:</p>
<ul>
<li><strong>type parameters</strong>: the types of the objects that will define the payload
of the note.</li>
</ul>
<h2>A first example</h2>
<p>The example below creates a single <code>INFO</code> note in the class <code>Service</code>:</p>
<pre class="jyf"><code><span class="iec">package</span><span class="tu9"> </span><span class="igz">com</span><span class="nhu">.</span><span class="igz">example</span><span class="nhu">;</span><span class="tu9"> </span><span class="iec">import</span><span class="tu9"> </span><span class="igz">objectos</span><span class="nhu">.</span><span class="igz">lang</span><span class="nhu">.</span><span class="nhu">*</span><span class="nhu">;</span><span class="tu9">

</span><span class="iec">public</span><span class="tu9"> </span><span class="iec">class</span><span class="tu9"> </span><span class="igz">Service</span><span class="tu9"> </span><span class="nhu">{</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">STARTED</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">info</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
</span><span class="nhu">}</span></code></pre>
<p>Letâ€™s examine this declaration. We will explain the details as we go.</p>
<h3>The note is a <code>static final</code> field</h3>
<p>The first thing to notice is that the note is defined as a field in our class.
It is highly recommended that you declare note fields as both <code>static</code> and <code>final</code>.
This is not a mandatory condition but, once again, it is highly recommended that you
do so. Reasons are:</p>
<ul>
<li>note instances are <em>immutable</em>. No reason allocating a new note object every time
you wish to send a note; and</li>
<li>allows the use of the <code>==</code> operator when equality comparison is required.</li>
</ul>
<h3>Note level</h3>
<p>The second thing to notice is that the note is created by invoking the <code>info()</code> method of
the note class.</p>
<p>The name of the method indicates the level of the created note. If we wanted the note
to have the <code>DEBUG</code> level we would have called the <code>debug()</code> method like so:</p>
<pre class="jyf"><code><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">STARTED</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">debug</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span></code></pre>
<h3>Implicit source and key</h3>
<p>Finally, the third thing to notice is that we did not specify
neither a source nor a key for our note. As a quick reminder:</p>
<ul>
<li>the <strong>source</strong> is a name used to indicate from where a note was sent; and</li>
<li>the <strong>key</strong> is an object used to differentiate notes of the same source.</li>
</ul>
<p>When not explicitly defined both properties are inferred from the location where the note
was instantiated. Internally this is done by walking the stack frames of the executing thread.
The values will be:</p>
<ul>
<li>the <strong>source</strong> value will be the fully qualified name of the class; and</li>
<li>the <strong>key</strong> value will be concatenation of the file name with line number.</li>
</ul>
<p>Therefore, in our example the properties will have the following values:</p>
<ul>
<li><strong>source</strong> = com.example.Service; and</li>
<li><strong>key</strong> = Service.java:4.</li>
</ul>
<p>Or, in Java code, we would have:</p>
<pre class="jyf"><code><span class="igz">String</span><span class="tu9"> </span><span class="igz">source</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">STARTED</span><span class="nhu">.</span><span class="igz">source</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
</span><span class="igz">source</span><span class="nhu">.</span><span class="igz">equals</span><span class="nhu">(</span><span class="uc6">&quot;com.example.Service&quot;</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9"> </span><span class="wjs">// evals to true</span><span class="tu9">

</span><span class="igz">Object</span><span class="tu9"> </span><span class="igz">key</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">STARTED</span><span class="nhu">.</span><span class="igz">key</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
</span><span class="igz">key</span><span class="nhu">.</span><span class="igz">equals</span><span class="nhu">(</span><span class="uc6">&quot;Service.java:4&quot;</span><span class="nhu">)</span><span class="tu9"> </span><span class="wjs">// evals to true;</span></code></pre>
<h2>Standard note levels</h2>
<p>Objectos Lang defines 5 standard note levels. They are listed below
ordered from the least severe to the most severe:</p>
<ul>
<li>TRACE;</li>
<li>DEBUG;</li>
<li>INFO;</li>
<li>WARN; and</li>
<li>ERROR.</li>
</ul>
<p>In order to create an note having an specific level you invoke
the appropriate <em>static</em> method from the note class. The example below
creates five different notes each having a different note level:</p>
<pre class="jyf"><code><span class="iec">import</span><span class="tu9"> </span><span class="igz">objectos</span><span class="nhu">.</span><span class="igz">lang</span><span class="nhu">.</span><span class="nhu">*</span><span class="nhu">;</span><span class="tu9">

</span><span class="iec">public</span><span class="tu9"> </span><span class="iec">class</span><span class="tu9"> </span><span class="igz">Levels</span><span class="tu9"> </span><span class="nhu">{</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">TRACE</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">trace</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">DEBUG</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">debug</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">INFO</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">info</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">WARN</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">warn</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">ERROR</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">error</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
</span><span class="nhu">}</span></code></pre>
<h2>Creating parameterized notes</h2>
<p>Up to this point we have been using the <code>Note0</code> class in our examples.
This type of note does not allow you to pass any additional argument
to the <code>send</code> method. As an example the following code does not compile:</p>
<pre class="jyf"><code><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">IO_ERROR</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">error</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">

</span><span class="iec">public</span><span class="tu9"> </span><span class="iec">void</span><span class="tu9"> </span><span class="igz">log</span><span class="nhu">(</span><span class="igz">NoteSink</span><span class="tu9"> </span><span class="igz">sink</span><span class="nhu">,</span><span class="tu9"> </span><span class="igz">IOException</span><span class="tu9"> </span><span class="igz">e</span><span class="nhu">)</span><span class="tu9"> </span><span class="nhu">{</span><span class="tu9">
  </span><span class="igz">sink</span><span class="nhu">.</span><span class="igz">send</span><span class="nhu">(</span><span class="igz">IO_ERROR</span><span class="nhu">,</span><span class="tu9"> </span><span class="igz">e</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="wjs">//                 ^</span><span class="tu9">
  </span><span class="wjs">// compilation error here</span><span class="tu9">
</span><span class="nhu">}</span></code></pre>
<p>Sometimes you will want to add some additional data to the note.
In the example above we might want to pass the exception along. This
way a <code>NoteSink</code> acting as a logger could, for example, add the stack trace
of the exception to the log file.</p>
<p>In order to do that, you need to declare a parameterized note instance.
The following code compiles without errors:</p>
<pre class="jyf"><code><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note1</span><span class="nhu">&lt;</span><span class="igz">IOException</span><span class="nhu">&gt;</span><span class="tu9"> </span><span class="igz">IO_ERROR</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note1</span><span class="nhu">.</span><span class="igz">error</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">

</span><span class="iec">public</span><span class="tu9"> </span><span class="iec">void</span><span class="tu9"> </span><span class="igz">log</span><span class="nhu">(</span><span class="igz">NoteSink</span><span class="tu9"> </span><span class="igz">sink</span><span class="nhu">,</span><span class="tu9"> </span><span class="igz">IOException</span><span class="tu9"> </span><span class="igz">e</span><span class="nhu">)</span><span class="tu9"> </span><span class="nhu">{</span><span class="tu9">
  </span><span class="igz">sink</span><span class="nhu">.</span><span class="igz">send</span><span class="nhu">(</span><span class="igz">IO_ERROR</span><span class="nhu">,</span><span class="tu9"> </span><span class="igz">e</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
</span><span class="nhu">}</span></code></pre>
<p>Notice that we have changed the note type from <code>Note0</code> to <code>Note1</code>.
The integer number at the end of the class name indicates the number
of type parameters that the note subclass declares:</p>
<ul>
<li><code>Note0</code> does not allow any argument;</li>
<li><code>Note1</code> allows one argument;</li>
<li><code>Note2</code> allows two arguments; and</li>
<li><code>Note3</code> allows three arguments.</li>
</ul>
<p>The next example illustrates the creation of each one of the available
note types:</p>
<pre class="jyf"><code><span class="iec">import</span><span class="tu9"> </span><span class="igz">java</span><span class="nhu">.</span><span class="igz">io</span><span class="nhu">.</span><span class="nhu">*</span><span class="nhu">;</span><span class="tu9">
</span><span class="iec">import</span><span class="tu9"> </span><span class="igz">objectos</span><span class="nhu">.</span><span class="igz">lang</span><span class="nhu">.</span><span class="nhu">*</span><span class="nhu">;</span><span class="tu9">

</span><span class="iec">public</span><span class="tu9"> </span><span class="iec">class</span><span class="tu9"> </span><span class="igz">TypeArgs</span><span class="tu9"> </span><span class="nhu">{</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note0</span><span class="tu9"> </span><span class="igz">ZERO</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note0</span><span class="nhu">.</span><span class="igz">trace</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note1</span><span class="nhu">&lt;</span><span class="igz">String</span><span class="nhu">&gt;</span><span class="tu9"> </span><span class="igz">ONE</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note1</span><span class="nhu">.</span><span class="igz">debug</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note2</span><span class="nhu">&lt;</span><span class="igz">String</span><span class="nhu">,</span><span class="tu9"> </span><span class="igz">Long</span><span class="nhu">&gt;</span><span class="tu9"> </span><span class="igz">TWO</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note2</span><span class="nhu">.</span><span class="igz">info</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
  </span><span class="iec">static</span><span class="tu9"> </span><span class="iec">final</span><span class="tu9"> </span><span class="igz">Note3</span><span class="nhu">&lt;</span><span class="igz">String</span><span class="nhu">,</span><span class="tu9"> </span><span class="igz">Long</span><span class="nhu">,</span><span class="tu9"> </span><span class="igz">IOException</span><span class="nhu">&gt;</span><span class="tu9"> </span><span class="igz">THREE</span><span class="tu9"> </span><span class="nhu">=</span><span class="tu9"> </span><span class="igz">Note3</span><span class="nhu">.</span><span class="igz">error</span><span class="nhu">(</span><span class="nhu">)</span><span class="nhu">;</span><span class="tu9">
</span><span class="nhu">}</span></code></pre>
</article></main><nav id="mgc"><div id="gcl"><a href="/0.2/objectos-lang/note-sink-api/index.html"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" height="16" width="16"><path fill="none" d="M0 0h24v24H0z"></path><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg><div class="bhi"><div>Previous</div><span>The note sink API</span></div></a></div><div id="qpz"><a href="/0.2/objectos-lang/note-sink-api/the-note-sink-interface.html"><div class="bhi"><div>Next</div><span>Using the NoteSink interface</span></div><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" height="16" width="16"><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></a></div></nav></body></html>